# DNS Service Discovery Example
# Prometheus queries DNS records to discover targets

scrape_configs:
  - job_name: 'dns-discovered-nodes'
    dns_sd_configs:
      - names:
          - 'node-exporter.example.com'  # A/AAAA records
        type: 'A'
        port: 9100
        refresh_interval: 30s

  # Using SRV records (includes port in DNS)
  - job_name: 'dns-srv-services'
    dns_sd_configs:
      - names:
          - '_prometheus._tcp.example.com'  # SRV record
        type: 'SRV'
        refresh_interval: 30s

# How it works:
# - Prometheus queries DNS for the specified names
# - Discovers all IPs returned by the DNS query
# - Automatically adds/removes targets as DNS changes
# - No manual target list needed
